<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Slide com Streetview Mapillary</title>
  <script src="https://npmcdn.com/mapillary-js@1.1.0/dist/mapillary-js.min.js"></script>
  <link rel="stylesheet" href="https://npmcdn.com/mapillary-js@1.1.0/dist/mapillary-js.min.css"/>

  <link rel="shortcut icon" href="../imagens/favicon.ico" />
  <link href='https://www.mapbox.com/base/latest/base.css' rel='stylesheet' />
  
  <style>
  
  .mly-wrapper { margin: 0 auto; }
  
  .mly-wrapper {
    position: relative;
    background-color: grey;
    width: 640px;
    height: 480px;
  }
  #mly, .mapillary-js {
    position: relative;
    height: 100%;
    width: 100%;
  }
</style>
</head>
<body class="fill-navy dark prose">
	<script src="../js/jquery.min.js" ></script>
	<script src="../js/urlparams.js" ></script>
	<script src="../js/funcoes.js" ></script>
	<script src="../js/base64.js" ></script>
	
	<div class="mly-wrapper"><div class="mly" id="viewer"></div></div>
	<script>
       var MapillaryB = 'Blyjcf0KropoNn6PSz1FYw';
       var MapillaryF = 'TKe3-kThBvMx-G2EcGh82g';
       var Comment = '';
       var PgTitle = '';
	
     	 //URL        	 
		 var TestB = $.urlParam('b');
		 var TestF = $.urlParam('f');
		 var TestC = $.urlParam('c');

		 if (TestB!=null){ MapillaryB = TestB;}         
		 if (TestF!=null){ MapillaryF = TestF;}         
		 if (TestC!=null){
		 	var TempC = decodeBase64(TestC);	 	 
		 	Comment = TempC.substr(0, 127); 
		 	PgTitle = Comment + ' | ';
		 }         
	
	
	
	document.addEventListener("DOMContentLoaded", function(event) {
	    var viewer = new Mapillary.Viewer(
	            "viewer",
	           'aUJQWHVRZ1J2UkUwRUhoZ2J6SURHUTo3OTY1ZmEyZWY3N2EyYjZl',  // Replace this with your own ClientID
	           MapillaryB, 										  // Photo background
	            {
	                "cover": false,
	                "imageplane": false,
	                "direction": false,
	                "sequence": false,
	                "mouse": false,
	                "keyboard": false,
	                "slider": {
	                    keys: {
	                        background: MapillaryF,
	                        foreground: MapillaryB, // Same as initial key above
	                    },
	                    initialPosition: 1.0,
	                }
	            });
	})
	</script>
	
	        <div class="pad2">
	            <h2 id="ImgDesc" class="inline col6 text-right space">xxxxxxxxxxxx</h2>
	            <h3 class="inline col6 fancy"> | Streetview Mapillary</h3>
	            <div>
	            <a id="btnBg" href="#" class="col2 button  fill-green inline" ><img class="inline" src="../imagens/mapillary-logo-white.svg"> Mapillary Foto 1</a></div>
	            <a id="btnFg" href="#" class="col2 button margin0 fill-green inline" ><img class="inline" src="../imagens/mapillary-logo-white.svg"> Mapillary Foto 2</a></div>
	            
	            <a href="/conhecerosm/streetview" class="col2 button icon prev margin0 inline" >Voltar</a></div>
	            <a href="make.html" class="col2 button icon turn-right  fill-mustard margin0 inline" >Fa√ßa o seu slide!</a>
	            </div>	            
	        </div>
            <script>
					$("#btnBg").click(function(e) { e.preventDefault();});
					$("#btnFg").click(function(e) { e.preventDefault();});
            
            	document.getElementById("ImgDesc").textContent = Comment;
            	if (TestC!=null){
            		document.title = PgTitle + " Streetview Mapillary";
            	}
            	
            	var URLBg = GetLinkMapillaryImg(MapillaryB); 
            	var URLFg = GetLinkMapillaryImg(MapillaryF); 
            	
            	$("#btnBg").prop("href", URLBg);
            	$("#btnFg").prop("href", URLFg);            	            	 
            </script>            
	        <p class="pad1 center">
		        feito com <span class="icon heart"></span> usando <a href="http://mapillary.github.io/mapillary-js/" >mapillary-js</a>
	        </p>
	
</body>
</html>